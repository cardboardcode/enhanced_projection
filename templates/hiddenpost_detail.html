{% extends "base2.html" %}
{% load urlify %}
{% load crispy_forms_tags %}
{% block head_title %} 
{{ instance.title }} | {{ block.super }} 
{% endblock head_title %}

{% block content %}


<div class ='col-sm-7'>
<div class="panel panel-info">
{% if instance.image %}
	<img src='{{ instance.image.url }}' class='img-responsive' />
{% endif %}
</div>
<div class="well well-lg">
<p> <strong> Question: </strong>{{ title }} </p>
<p><strong>Author:</strong> {{ instance.user }}</p>
<p><strong>Description: </strong>{{ instance.content | linebreaks }}</p>
<br/>
<p align="right">{{ instance.timestamp }}</p>
</div>
</div>


<div class="col-sm-5">
<div>
	<p class = 'lead'>Comments</p>
	<form method = "POST" action = "."> {% csrf_token %}
		{{ comment_form | crispy }}
		<input type = 'submit' value = 'Post comment' class = 'btn btn-default'>
	</form>
	<hr/>
	{% for comment in comments %}

	<blockquote>
		<p>{{ comment.content }}</p>
		<footer> via {{ comment.user }} | {{ comment.timestamp| timesince }} ago | {% if comment.children.count > 0 %}{{ comment.children.count }} Comment{% if comment.children.count > 1 %}s {% endif %} | {% endif %} <a class = 'comment-reply-btn' href ='#'>Reply </a> | <a class = '' href= '{{ comment.get_absolute_url }}'> Thread </a></footer>
		<div class = 'comment-reply' style ='display:none;'> 
			{% for child_comment in comment.children %}
				<blockquote>
				<p> {{ child_comment.content }} </p>
				<footer> via {{ child_comment.user }} | {{ child_comment.timestamp| timesince }} ago </footer>
				</blockquote>
			{% endfor %}

		<form method = "POST" action = "."> {% csrf_token %}
			{{ comment_form | crispy }}
			<input type = 'hidden' name='parent_id' value = '{{ comment.id }}'>
			<input type = 'submit' value = 'Reply' class = 'btn btn-default'>
		</form>
	</div>
	</blockquote>
	<hr/>
	{% endfor %}
</div>
</div>


{% endblock content %}